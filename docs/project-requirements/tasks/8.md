# Task 8: Build quote initiation UI with product selection and priority configuration

**Dependencies:** Task 7

### Goal
Create the quote initiation screen where users can select product quantities, configure decision priorities, add optional notes, and start negotiations.

### Implementation Context
**Files to Modify:**
- `src/features/quotes/useCases/CreateQuotePage.tsx` (new)
- `src/features/quotes/ui/ProductQuantitySelector.tsx` (new)
- `src/features/quotes/ui/PriorityWeightSliders.tsx` (new)
- `src/App.tsx` (add route)

**Key Requirements:**
- Display all 5 products with quantity inputs (default: 10k for Pulse Pro, 5k for others)
- Priority sliders for quality, cost, lead_time, payment_terms (must sum to 100%)
- Optional notes textarea (max 500 chars)
- "Start Negotiation" button creates quote and navigates to negotiation view
- Validation: at least one product quantity > 0, priorities sum to 100%

**Technical Notes:**
- Use React Hook Form for form state management
- Use Zod for validation schema
- Use existing shadcn/ui components (Input, Slider, Textarea, Button)
- Use Convex mutation via React Query for quote creation
- Follow DDD structure: features/quotes/useCases, features/quotes/ui
- Leverage existing form patterns from users feature

**Simplicity Decisions:**
- Simple number inputs instead of fancy quantity pickers
- Basic sliders instead of interactive priority visualization
- Client-side validation before submission

### Scope Definition
**Deliverables:**
- CreateQuotePage component with form layout
- ProductQuantitySelector component displaying products with quantity inputs
- PriorityWeightSliders component with 4 sliders summing to 100%
- Form validation using Zod schema
- Quote creation mutation integration
- Navigation to negotiation view on success
- Route added to App.tsx

**Exclusions:**
- Product search or filtering (only 5 products)
- Save draft functionality (out of scope)
- Quote templates (out of scope)

### Implementation Steps
1. Create `src/features/quotes/useCases/CreateQuotePage.tsx` with form structure
2. Create `src/features/quotes/ui/ProductQuantitySelector.tsx` that maps products to quantity inputs
3. Create `src/features/quotes/ui/PriorityWeightSliders.tsx` with 4 sliders (quality, cost, lead_time, payment_terms)
4. Implement slider logic to ensure priorities sum to 100% (adjust others when one changes)
5. Add Zod validation schema: products array with at least one quantity > 0, priorities sum to 100%, notes max 500 chars
6. Integrate React Hook Form with Zod resolver
7. Add "Start Negotiation" button that calls createQuote mutation
8. On success, navigate to `/quotes/:quoteId/negotiations` route
9. Add route to `src/App.tsx`: `/quotes/new` â†’ CreateQuotePage
10. Style with Tailwind CSS for responsive layout (stack on mobile, side-by-side on desktop)
11. **Test: Form validation prevents invalid submission**
   - **Setup:** Form with all product quantities = 0
   - **Action:** Click "Start Negotiation"
   - **Expect:** Validation error shown, submission blocked
12. **Test: Successful quote creation navigates to negotiations**
   - **Setup:** Valid form data
   - **Action:** Submit form
   - **Expect:** Quote created, navigated to negotiation view with quote_id

### Success Criteria
- All 5 products displayed with quantity inputs
- Default quantities pre-filled correctly
- Priority sliders sum to 100% at all times
- Form validation prevents invalid submissions
- Quote successfully created on valid submission
- Navigation to negotiation view works
- Responsive layout on mobile and desktop
- Loading states shown during submission

### Scope Constraint
Implement only quote initiation UI. Do not implement negotiation view or decision display.