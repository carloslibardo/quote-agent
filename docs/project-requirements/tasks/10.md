# Task 10: Build decision panel UI with supplier recommendation and evaluation scores

**Dependencies:** Tasks 5, 9

### Goal
Create the decision panel that displays the recommended supplier, reasoning, and detailed evaluation scores after all negotiations complete.

### Implementation Context
**Files to Modify:**
- `src/features/quotes/ui/DecisionPanel.tsx` (new)
- `src/features/quotes/ui/SupplierCard.tsx` (new)
- `src/features/quotes/ui/EvaluationScoresTable.tsx` (new)
- `src/features/quotes/useCases/NegotiationPage.tsx` (integrate panel)

**Key Requirements:**
- Display when all three negotiations are completed
- Show recommended supplier with name, characteristics, final offer summary
- Display reasoning explanation from AI
- Show evaluation scores table for all suppliers across all criteria
- "View Details" button expands full evaluation breakdown
- "Accept" button confirms supplier selection
- Responsive layout stacking on mobile

**Technical Notes:**
- Use Convex query (getQuoteDecision) to fetch decision data
- Conditionally render panel only when quote status is "completed"
- Use existing shadcn/ui components (Card, Table, Button)
- Format scores as percentages or 0-100 scale
- Highlight winning supplier in scores table
- Follow DDD structure: features/quotes/ui

**Simplicity Decisions:**
- Static display instead of interactive score visualization
- Simple table instead of charts/graphs
- No decision revision or override mechanism

### Scope Definition
**Deliverables:**
- DecisionPanel component with conditional rendering
- SupplierCard component displaying winner details
- EvaluationScoresTable component with all supplier scores
- "View Details" expandable section
- "Accept" button (placeholder action for MVP)
- Integration into NegotiationPage

**Exclusions:**
- Interactive score charts (out of scope)
- Decision comparison or what-if analysis (out of scope)
- Contract generation (out of scope)

### Implementation Steps
1. Create `src/features/quotes/ui/DecisionPanel.tsx` component
2. Fetch decision using getQuoteDecision query with quote_id
3. Create `src/features/quotes/ui/SupplierCard.tsx` to display winning supplier
4. Show supplier name, quality rating, pricing tier, delivery speed, payment terms
5. Display reasoning text from decision record
6. Create `src/features/quotes/ui/EvaluationScoresTable.tsx` with Table component
7. Display table with columns: Supplier, Quality Score, Cost Score, Lead Time Score, Payment Score, Total Score
8. Highlight winning supplier row with background color or bold text
9. Implement "View Details" button that toggles expanded view with score breakdowns
10. Add "Accept" button (for MVP, shows success toast)
11. Integrate DecisionPanel into NegotiationPage below accordion
12. Conditionally render panel only when all negotiations have status "completed" or "impasse"
13. Style with Tailwind CSS for responsive layout
14. **Test: Decision panel appears when negotiations complete**
   - **Setup:** Quote with 3 completed negotiations and decision record
   - **Action:** View NegotiationPage
   - **Expect:** Decision panel visible below accordion with recommended supplier
15. **Test: Evaluation scores display correctly**
   - **Setup:** Decision with evaluation_scores for all 3 suppliers
   - **Action:** View decision panel
   - **Expect:** Table shows all scores, winning supplier highlighted

### Success Criteria
- Decision panel appears only when all negotiations complete
- Recommended supplier displayed with full details
- Reasoning explanation clearly visible
- Evaluation scores table shows all suppliers and criteria
- Winning supplier visually highlighted in table
- "View Details" expands additional information
- "Accept" button provides user feedback
- Responsive layout on mobile and desktop

### Scope Constraint
Implement only decision display UI. Do not implement decision revision or contract generation.