# Task 11: Build past negotiations list view with read-only conversation access

**Dependencies:** Task 6

### Goal
Create a screen displaying all completed quote requests with the ability to view past negotiations in read-only mode.

### Implementation Context
**Files to Modify:**
- `src/features/quotes/useCases/PastNegotiationsPage.tsx` (new)
- `src/features/quotes/ui/QuoteListItem.tsx` (new)
- `src/App.tsx` (add route)

**Key Requirements:**
- Display list of all completed quotes ordered by date (newest first)
- Each item shows: date, products, selected supplier, status
- Click item navigates to read-only negotiation view
- Responsive layout: card layout on mobile, table on desktop
- Empty state when no past negotiations exist

**Technical Notes:**
- Use Convex query (listQuotes) to fetch all quotes
- Filter for quotes with status "completed"
- Use existing shadcn/ui components (Card, Table)
- Reuse NegotiationPage component with read-only mode flag
- Format dates using date-fns library (already in dependencies)
- Follow DDD structure: features/quotes/useCases, features/quotes/ui

**Simplicity Decisions:**
- No pagination (acceptable for MVP with limited quotes)
- No search or filtering (out of scope)
- Simple list instead of advanced data table

### Scope Definition
**Deliverables:**
- PastNegotiationsPage component with quote list
- QuoteListItem component for each quote
- Click navigation to read-only NegotiationPage
- Empty state component
- Route added to App.tsx
- Responsive layout (cards on mobile, table on desktop)

**Exclusions:**
- Pagination (deferred until >50 quotes)
- Search or filtering (out of scope)
- Quote deletion or archiving (out of scope)

### Implementation Steps
1. Create `src/features/quotes/useCases/PastNegotiationsPage.tsx` component
2. Fetch quotes using listQuotes query, filter for status "completed"
3. Create `src/features/quotes/ui/QuoteListItem.tsx` component
4. Display quote date (formatted), products list, selected supplier, status badge
5. Make entire item clickable, navigate to `/quotes/:quoteId/negotiations?readonly=true`
6. Implement empty state: "No past negotiations" message with icon
7. Add responsive layout: Card components on mobile, Table on desktop (use Tailwind breakpoints)
8. Modify NegotiationPage to detect `readonly` query param and disable intervention inputs
9. Add route to `src/App.tsx`: `/quotes/history` â†’ PastNegotiationsPage
10. Style with Tailwind CSS
11. **Test: Past quotes display in list**
   - **Setup:** 3 completed quotes in database
   - **Action:** Navigate to /quotes/history
   - **Expect:** List shows 3 items ordered by date descending
12. **Test: Click navigates to read-only view**
   - **Setup:** Past quote in list
   - **Action:** Click quote item
   - **Expect:** Navigate to negotiation view with intervention inputs disabled

### Success Criteria
- All completed quotes displayed in list
- Quotes ordered by date (newest first)
- Each item shows relevant information
- Click navigation works correctly
- Read-only mode disables intervention inputs
- Empty state shown when no quotes exist
- Responsive layout on mobile and desktop
- Loading states shown during data fetch

### Scope Constraint
Implement only past negotiations list and read-only view. Do not implement quote management features.